<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping
PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="com.redhat.rhn.domain.image.Image"
           table="SUSEIMAGES"  mutable="false">
      <cache usage="read-only"/>
      <id name="id"
          type="java.lang.Long"
          column="id">
          <meta attribute="scope-set">protected</meta>
          <generator class="sequence">
                <param name="sequence">suse_images_id_seq</param>
          </generator>
      </id>
          <property name="name" column="name" type="string" length="256" />
          <property name="version" column="version" type="string" length="64" />
          <property name="arch" column="arch" type="string" length="10" />
          <property name="imageType" column="image_type" type="string" length="10" />
          <property name="downloadUrl" column="download_url" type="string" length="256" />
          <property name="path" column="path" type="string" length="1000" />
          <property name="fileName" column="file_name" type="string" length="128" />
          <property name="checksum" column="checksum" type="string" length="128" />
          <property name="status" column="status" type="string" length="10" />
          <many-to-one name="org" class="com.redhat.rhn.domain.org.Org"
            column="org_id"/>
    </class>
    <query name="Image.listVmxByOrg">
        <![CDATA[from com.redhat.rhn.domain.image.Image as i
                where i.status = 'DONE'
                and   i.imageType = 'vmx'
                and   i.org = :org]]>
    </query>
    <query name="Image.listXenByOrg">
        <![CDATA[from com.redhat.rhn.domain.image.Image as i
                where i.status = 'DONE'
                and   i.imageType = 'xen'
                and   i.org = :org]]>
    </query>
    <query name="Image.listDeployableImagesByOrg">
        <![CDATA[from com.redhat.rhn.domain.image.Image as i
                where i.status = 'DONE'
                and   i.org = :org
                order by i.name, i.version desc]]>
    </query>
    <query name="Image.listAllImagesByOrg">
        <![CDATA[from com.redhat.rhn.domain.image.Image as i
                where i.org = :org]]>
    </query>
    <query name="Image.findById">
        <![CDATA[from com.redhat.rhn.domain.image.Image as i where i.id = :id]]>
    </query>
    
</hibernate-mapping>
