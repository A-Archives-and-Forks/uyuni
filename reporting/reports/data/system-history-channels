
synopsis:

	Channel event history

description:

	Channel event history.

columns:

	server_id	System identifier
	event_id	Event id
	created_date	Date created
	status		Status of the event
	event		Type of the event
	event_data	Channel label

multival_columns:

	event_id
	event_data : event_data

sql:

	select rhnserverhistory.server_id,
		rhnserverhistory.id as event_id,
		to_char(rhnserverhistory.created, 'YYYY-MM-DD HH24:MI:SS') as created_date,
		'Done' as status,
		case when rhnserverhistory.summary like 'subscribed to channel %' then 'Subscribed to channel'
			when rhnserverhistory.summary like 'unsubscribed from channel %' then 'Unsubscribed from channel'
			end as event,
		details as event_data
	from rhnserverhistory
	where (rhnserverhistory.summary like 'subscribed to channel %' or rhnserverhistory.summary like 'unsubscribed from channel %')
	order by rhnserverhistory.server_id, rhnserverhistory.created, rhnserverhistory.id

